!function(){function o(o,n,t){function e(){unloadProgress.hide();var o=document.body,n=Array.prototype.slice.call(o.childNodes);n.forEach(function(n){n.classList.contains("localNavigation-leave")||o.removeChild(n)});var t=document.head,n=Array.prototype.slice.call(t.childNodes);n.forEach(function(o){var n=o.tagName;"TITLE"!==n&&"META"!==n&&("LINK"!==n||"icon"!==o.rel&&!o.classList.contains("localNavigation-leave"))&&t.removeChild(o)})}return console.log("LoadPage",o),n(t,function(){e(),console.log(o+" failed to load."),t()},e)}function n(o,n,t){console.log("LoadScript",o);var e=document.createElement("script");return e.src=o,e.onload=n,e.onerror=t,document.body.appendChild(e),{abort:function(){e.onload=null}}}!function(t,e){function a(t,e){function a(){r=null,void 0!==e&&e(),l()}console.log("loadHref",t);var s=t.href,u=t.hash;null!==r&&r.abort();var d=c[s];r=void 0===d?n(i+s+"load.js",function(){void 0===c[s]?location=i+s+u:r=o(s,c[s],a)},function(){location=i+s+u}):o(s,d,a)}function l(){var o=document.querySelectorAll(".localNavigation-link");
Array.prototype.forEach.call(o,function(o){var n=o.href,t=n.substr(i.length),l=t.match(/(?:#.*)?$/)[0];""!==l&&(t=t.substr(0,t.length-l.length));var r={href:t,hash:l};o.addEventListener("click",function(o){o.preventDefault(),e.show(),a(r,function(){console.log("history.pushState",r),history.pushState(r,document.title,n)})})})}var r=null,c=Object.create(null),i=function(){var o=document.createElement("a");return o.href=t,o.href}(),s={href:location.href.substr(i.length).replace(/#.*?$/,""),hash:location.hash};addEventListener("popstate",function(o){console.log("popstate",o.state);var n=o.state;null===n&&(n=s),a(n)}),l(),window.localNavigation={registerPage:function(o,n){c[o]=n}}}(base,unloadProgress)}();