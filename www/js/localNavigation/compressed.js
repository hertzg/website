!function(){function o(o){var e=document.createElement("a");return e.href=o,console.log("AbsoluteBase",o,e.href),e.href}function e(o,e,t,n){function a(){unloadProgress.hide();var o=document.body,e=Array.prototype.slice.call(o.childNodes);e.forEach(function(e){e.classList.contains("localNavigation-leave")||o.removeChild(e)});var t=document.head,e=Array.prototype.slice.call(t.childNodes);e.forEach(function(o){var e=o.tagName;"TITLE"!==e&&"META"!==e&&("LINK"!==e||"icon"!==o.rel&&!o.classList.contains("localNavigation-leave"))&&t.removeChild(o)})}return console.log("LoadPage",e),t(o,n,function(o){a(),console.log(e+" failed to load."),n(o)},a)}function t(o,e,t){console.log("LoadScript",o);var n=document.createElement("script");return n.src=o,n.onload=e,n.onerror=t,document.body.appendChild(n),{abort:function(){n.onload=null}}}!function(n,a){function l(o,a){function l(o){n=o,i=null,void 0!==a&&a(),""!==h&&(removeEventListener("popstate",r),location.hash=h,addEventListener("popstate",r)),c()}console.log("loadHref",o);
var d=o.href,h=o.hash;null!==i&&i.abort();var f=s[d];i=void 0===f?t(u+d+"load.js",function(){void 0===s[d]?location=u+d+h:i=e(n,d,s[d],l)},function(){location=u+d+h}):e(n,d,f,l)}function r(e){console.log("popstate",e.state);var t=e.state;null===t&&(t=d),u=o(t.base),l(t)}function c(){var e=document.querySelectorAll(".localNavigation-link");Array.prototype.forEach.call(e,function(e){var t=e.href,r=t.substr(u.length),c=r.match(/(?:#.*)?$/)[0];""!==c&&(r=r.substr(0,r.length-c.length));var i={base:n,href:r,hash:c};e.addEventListener("click",function(e){e.preventDefault(),a.show(),l(i,function(){console.log("history.pushState",i),history.pushState(i,document.title,t),u=o(n)})})})}var i=null,s=Object.create(null),u=o(n),d={base:n,href:location.href.substr(u.length).replace(/#.*?$/,""),hash:location.hash};addEventListener("popstate",r),c(),window.localNavigation={registerPage:function(o,e){s[o]=e}}}(base,unloadProgress)}();