!function(){function e(){var e,t,n;return navigator.requestWakeLock?(e=function(){n=navigator.requestWakeLock("screen")},t=function(){n.unlock()}):e=t=function(){},{lock:e,unlock:t}}!function(t,n,a){function c(e,t,n){var a=d(e,t);if(null!==n){var c=e-n,l=d(Math.abs(c),t);"0"!=l&&(a+=" ("+(c>0?"+":"-")+l+")")}return a}function d(e,t){var n=e.toFixed(t);return n.replace(/(\.\d*?)0+$/,"$1").replace(/\.$/,"")}var l=e(),o=!1,i=navigator.geolocation,r=document.getElementById("geolocationLink");r.addEventListener("click",function(e){function r(){i.clearWatch($),removeEventListener("keydown",p),w.removeChild(b),o=!1,l.unlock()}function u(){var e=document.createElement("div");return e.className="hr",e}function m(e,t){var n=document.createElement("div");n.className="icon "+t;var a=document.createElement("div");a.className="image_link-icon",a.appendChild(n);var c=document.createElement("div");c.className="image_link-content colorText",c.appendChild(document.createTextNode(e));var d=document.createElement("a");return d.className="clickable link image_link",d.appendChild(a),d.appendChild(c),{contentElement:c,element:d}}function p(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||27==e.keyCode&&(e.preventDefault(),r())}if(e.preventDefault(),l.lock(),!o){o=!0;var v=document.createTextNode("0"),s=document.createElement("div");s.className="confirmDialog-aligner";var h=document.createTextNode(""),f=document.createTextNode(""),C=document.createTextNode(""),E=document.createElement("div");E.appendChild(document.createTextNode("Latitude: ")),E.appendChild(h),E.appendChild(document.createElement("br")),E.appendChild(document.createTextNode("Longitude: ")),E.appendChild(f),E.appendChild(document.createElement("br")),E.appendChild(document.createTextNode("Altitude: ")),E.appendChild(C);var g=document.createTextNode("Accuiring location... "),N=document.createElement("div");N.className="page-text",N.appendChild(g),N.appendChild(v),N.appendChild(document.createTextNode("%"));var k=m("Use the location","yes");k.contentElement.classList.add("grey");var y=m("Cancel","no");y.element.addEventListener("click",function(e){e.preventDefault(),r()});var x=document.createElement("div");x.className="twoColumns-column1",x.appendChild(k.element);var L=document.createElement("div");L.className="twoColumns-column2",L.appendChild(y.element);var T=document.createElement("div");T.className="twoColumns dynamic",T.appendChild(x),T.appendChild(L);var D=document.createElement("div");D.className="confirmDialog-frame",D.appendChild(N),D.appendChild(u()),D.appendChild(T);var b=document.createElement("div");b.className="confirmDialog",b.appendChild(s),b.appendChild(D);var w=document.body;w.appendChild(b),addEventListener("keydown",p);var A,K,V=[],q=40,W=10,$=i.watchPosition(function(e){if(!(e.coords.accuracy>50)){V.push(e);var l=V.length;l>q&&(V.shift(),l--);var o=100*l/q;if(v.nodeValue=Math.floor(o),!(W>l)){l==W&&(N.appendChild(E),k.contentElement.classList.remove("grey"),k.element.addEventListener("click",function(e){function t(e,t){var n="input[name="+e+"]";document.querySelector(n).value=t}e.preventDefault(),r(),t("latitude",d(A,9)),t("longitude",d(K,9)),t("altitude",d(altitude,3))}));var i=0,u=9;V.forEach(function(e){var t=e.coords;i+=t.accuracy,u+=t.altitudeAccuracy}),A=0,K=0,altitude=0,V.forEach(function(e){var t,n=e.coords;t=n.accuracy/i,A+=n.latitude*t,K+=n.longitude*t,t=n.altitudeAccuracy/u,altitude+=n.altitude*t}),h.nodeValue=c(A,9,t),f.nodeValue=c(K,9,n),C.nodeValue=c(altitude,3,a)}}},function(){},{enableHighAccuracy:!0})}})}(latitude,longitude,altitude)}();