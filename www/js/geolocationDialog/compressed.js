!function(){function e(e,t){return e.toPrecision(t).replace(/\.?0+$/,"")}var t=!1,a=navigator.geolocation,n=document.getElementById("geolocationLink");n.addEventListener("click",function(n){function d(){a.clearWatch(w),removeEventListener("keydown",i),k.removeChild(y),t=!1}function c(){var e=document.createElement("div");return e.className="hr",e}function l(e,t){var a=document.createElement("div");a.className="icon "+t;var n=document.createElement("div");n.className="image_link-icon",n.appendChild(a);var d=document.createElement("div");d.className="image_link-title",d.appendChild(document.createTextNode(e));var c=document.createElement("div");c.className="image_link-content",c.appendChild(d);var l=document.createElement("a");return l.className="clickable link image_link",l.appendChild(n),l.appendChild(c),{element:l,titleElement:d}}function i(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||27==e.keyCode&&(e.preventDefault(),d())}if(n.preventDefault(),!t){t=!0;var o=document.createTextNode("0"),r=document.createElement("div");r.className="confirmDialog-aligner";var m=document.createTextNode(""),u=document.createTextNode(""),p=document.createTextNode(""),v=document.createElement("div");v.appendChild(document.createTextNode("Latitude: ")),v.appendChild(m),v.appendChild(document.createElement("br")),v.appendChild(document.createTextNode("Longitude: ")),v.appendChild(u),v.appendChild(document.createElement("br")),v.appendChild(document.createTextNode("Altitude: ")),v.appendChild(p);var s=document.createElement("div");s.className="page-text",s.appendChild(document.createTextNode("Accuiring location... ")),s.appendChild(o),s.appendChild(document.createTextNode("%"));var h=l("Use the location","yes");h.titleElement.classList.add("disabled");var C=l("Cancel","no");C.element.addEventListener("click",function(e){e.preventDefault(),d()});var f=document.createElement("div");f.className="twoColumns-column1",f.appendChild(h.element);var E=document.createElement("div");E.className="twoColumns-column2",E.appendChild(C.element);var N=document.createElement("div");N.className="twoColumns dynamic",N.appendChild(f),N.appendChild(E);var g=document.createElement("div");g.className="confirmDialog-frame",g.appendChild(s),g.appendChild(c()),g.appendChild(N);var y=document.createElement("div");y.className="confirmDialog",y.appendChild(r),y.appendChild(g);var k=document.body;k.appendChild(y),addEventListener("keydown",i);var x,L,T=[],b=40,D=10,w=a.watchPosition(function(t){T.push(t);var a=T.length;a>b&&(T.shift(),a--);var n=100*a/b;if(o.nodeValue=Math.floor(n),!(D>a)){a==D&&(s.appendChild(v),h.titleElement.classList.remove("disabled"),h.element.addEventListener("click",function(e){function t(e,t){var a="input[name="+e+"]";document.querySelector(a).value=t}e.preventDefault(),d(),t("latitude",x),t("longitude",L),t("altitude",altitude)}));var c=0,l=9;T.forEach(function(e){var t=e.coords;c+=t.accuracy,l+=t.altitudeAccuracy}),x=0,L=0,altitude=0,T.forEach(function(e){var t,a=e.coords;t=a.accuracy/c,x+=a.latitude*t,L+=a.longitude*t,t=a.altitudeAccuracy/l,altitude+=a.altitude*t}),m.nodeValue=e(x,8),u.nodeValue=e(L,8),p.nodeValue=e(altitude,3)}},function(){},{enableHighAccuracy:!0})}})}();